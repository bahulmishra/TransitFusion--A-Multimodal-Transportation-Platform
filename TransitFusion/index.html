<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TransitFusion</title>

    <!-- OpenLayers CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/ol@v8.2.0/ol.css" type="text/css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">

    <!-- OpenLayers JS -->
    <script src="https://cdn.jsdelivr.net/npm/ol@v8.2.0/dist/ol.js"></script>
</head>

<body>
    <div class="app-container">

        <!-- Sidebar Panel (User Interface) -->
        <aside class="sidebar-panel">
            <header class="sidebar-header">
                <h2>TransitFusion</h2>
                <p>A Multimodal Transportation Platform</p>
            </header>

            <div class="service-toggles">
                <button id="btn-wms" class="toggle-btn active">WMS Request</button>
                <button id="btn-wfs" class="toggle-btn">WFS Request</button>
            </div>

            <div class="form-container">
                <!-- Common Section -->
                <div class="form-group">
                    <label for="server-url">Server URL</label>
                    <div class="input-with-button">
                        <input type="url" id="server-url" value="http://localhost:8080/geoserver/wms"
                            placeholder="Enter GeoServer URL...">
                        <button id="btn-get-cap" class="action-btn primary">Get Capabilities</button>
                    </div>
                </div>

                <hr class="divider">

                <!-- Layer Selection -->
                <div class="form-group">
                    <button id="btn-toggle-layers" class="collapsible-btn">
                        <span>Select Layer(s)</span>
                        <span class="icon">&#9660;</span>
                    </button>
                    <div id="layers-container" class="collapsible-content">
                        <p class="empty-state">Load capabilities to see layers</p>
                        <!-- Dynamic list will go here: -->
                        <!-- 
                        <label class="layer-item"><input type="radio" name="layer" value="workspace:layer1"> Layer 1</label>
                        -->
                    </div>
                </div>

                <hr class="divider">

                <!-- Parameters Section -->
                <div class="parameters-section">
                    <h3>Request Parameters</h3>

                    <div class="form-group">
                        <label for="param-srs">SRS (Projection)</label>
                        <select id="param-srs">
                            <option value="EPSG:4326">EPSG:4326 (WGS 84)</option>
                            <option value="EPSG:3857">EPSG:3857 (Web Mercator)</option>
                        </select>
                    </div>

                    <div class="form-group bounding-box">
                        <label>Bounding Box (MinX, MinY, MaxX, MaxY)</label>
                        <div class="bbox-grid">
                            <input type="number" id="bbox-minx" placeholder="Min X" step="any">
                            <input type="number" id="bbox-miny" placeholder="Min Y" step="any">
                            <input type="number" id="bbox-maxx" placeholder="Max X" step="any">
                            <input type="number" id="bbox-maxy" placeholder="Max Y" step="any">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="param-format">Format</label>
                        <select id="param-format">
                            <!-- WMS default formats -->
                            <option value="image/png" class="wms-option">PNG Image</option>
                            <option value="image/jpeg" class="wms-option">JPEG Image</option>
                            <!-- WFS default formats -->
                            <option value="application/json" class="wfs-option" style="display: none;">GeoJSON</option>
                        </select>
                    </div>

                    <!-- WMS Only: Size -->
                    <div class="form-group" id="size-container">
                        <label>Size (Width x Height)</label>
                        <div class="size-grid">
                            <input type="number" id="size-width" value="768" placeholder="Width">
                            <span class="cross">x</span>
                            <input type="number" id="size-height" value="500" placeholder="Height">
                        </div>
                    </div>
                </div>

                <div class="action-container">
                    <button id="btn-run-query" class="action-btn success run-btn">Run Query & Render</button>
                    <button id="btn-clear-map" class="action-btn danger">Clear Map</button>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Map Panel -->
            <section class="map-panel" id="map">
                <!-- OpenLayers Map will render here -->
                <div id="loader" class="loader hidden"></div>
            </section>

            <!-- XML Panel (Bottom) -->
            <section class="xml-panel">
                <div class="xml-content-wrapper">
                    <div class="xml-parsed-summary" id="xml-summary">
                        <strong>Status:</strong> Waiting for GetCapabilities request...
                    </div>
                    <pre><code id="xml-raw-display" class="xml-raw">Raw XML will appear here...</code></pre>
                </div>
            </section>
        </main>

    </div>

    <!-- Main Logic JS -->
    <script src="main.js"></script>
</body>

</html>